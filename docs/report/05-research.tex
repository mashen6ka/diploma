\chapter{Исследовательский раздел}
Ключевым недостатком пошагового алгоритма в сравнении с комбинированным является невозможность пропустить интервалы времени, не содержащие никаких событий. Как следствие, пошаговый алгоритм плохо адаптирован под квазисинхронное распределение событий, рассмотренное в аналитическом разделе. Событийный алгоритм, в свою очередь, теряет свою временную эффективность при росте очереди событий, а также при увеличении числа обращений к ней ввиду не константной сложности вставки событий.

Для измерения времени выполнения программного обеспечения используется устройство MacBook Air M1, 8-core GPU, 16 ГБ.

Для повышения точности результатов (ввиду наличия фактора случайности в процессе работы программного обеспечения) для каждого набора данных производится 100 прогонов алгоритмов с получением в итоге среднего значения.

\section{Сравнение алгоритмов}

\textbf{Квазисинхронное распределение событий}

Предлагается сравнить временные затраты пошагового, событийного и комбинированного алгоритмов на системе, состоящей из одного генератора и одного процессора. Продолжительность генерации заявки генерируется согласно равномерному квазисинхронному распределению с длиной пикового интервала в 100 тиков, минимальным и максимальным значением в 1 и 2 тика соответственно. Продолжительность обработки заявки генерируется в соответствии с равномерным распределением с минимальным и максимальным значением в 1 и 2 тика соответственно.
Моделируется работа системы в течение 100000 тиков таймера модельного времени. При этом для квазисинхронного распределения изменяется длина непикового интервала времени (интервала между пиками). Для комбинированного алгоритма размер нулевого уровня выбран в соответствии с длиной пикового интервала (100 тиков), а размер ненулевого уровня выбран равным 10. Шаг таймера модельного времени для пошагового алгоритма составляет 1 тик.

На рисунке \ref{img:graph1} представлен график сравнения временных затрат алгоритмов в зависимости от длины непиковых интервалов.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			width=15cm,
			height=10cm,
			grid=major,
			grid style=dashed,
			axis lines=left,
			ylabel={Время работы, мс},
			xlabel={Длина непикового интервала, тик},
			xmin=0, ymin=0,
			xmax=3000, ymax=500,
			xtick={0,500,...,3000},
			legend pos=north west
			]
			\addplot[color=red,mark=*] coordinates {
(0, 459)
(100, 222)
(200, 148)
(300, 114)
(400, 89)
(500, 74)
(600, 63)
(700, 55)
(800, 49)
(900, 45)
(1000, 40)
(1100, 37)
(1200, 34)
(1300, 32)
(1400, 29)
(1500, 28)
(1600, 26)
(1700, 25)
(1800, 23)
(1900, 22)
(2000, 21)
(2100, 20)
(2200, 19)
(2300, 18)
(2400, 17)
(2500, 17)
(2600, 16)
(2700, 15)
(2800, 15)
(2900, 15)
(3000, 14)
			};
			\addplot[color=blue,mark=square*] coordinates {
(0, 281)
(100, 185)
(200, 152)
(300, 139)
(400, 130)
(500, 123)
(600, 119)
(700, 116)
(800, 115)
(900, 116)
(1000, 115)
(1100, 114)
(1200, 110)
(1300, 109)
(1400, 110)
(1500, 110)
(1600, 107)
(1700, 106)
(1800, 107)
(1900, 103)
(2000, 102)
(2100, 101)
(2200, 100)
(2300, 100)
(2400, 100)
(2500, 99)
(2600, 99)
(2700, 99)
(2800, 101)
(2900, 100)
(3000, 101)
			};
			\addplot[color=green,mark=triangle*] coordinates {
(0, 381)
(100, 169)
(200, 112)
(300, 84)
(400, 67)
(500, 56)
(600, 48)
(700, 42)
(800, 37)
(900, 33)
(1000, 30)
(1100, 28)
(1200, 25)
(1300, 24)
(1400, 22)
(1500, 21)
(1600, 19)
(1700, 18)
(1800, 17)
(1900, 16)
(2000, 16)
(2100, 15)
(2200, 14)
(2300, 14)
(2400, 13)
(2500, 13)
(2600, 12)
(2700, 12)
(2800, 11)
(2900, 11)
(3000, 11)
			};
			\legend{\text{Комбинированный}, \text{Пошаговый}, \text{Событийный}}
		\end{axis}
	\end{tikzpicture}
	\caption{Время работы комбинированного и пошагового алгоритмов в зависимости от длины непиковых интервалов}
	\label{img:graph1}
\end{figure}

Проанализируем полученный результат. При малых (0---200 тиков) размерах непиковых интервалов временные затраты комбинированного алгоритма превышают временные затраты пошагового и событийного алгоритмов. Это связано с тем, что при данных величинах непикового интервала распределение событий стремится к равномерному, т.е. не квазисинхронному. Чем меньше длина непикового интервала, тем меньше промежутков, не насыщенных событиями, соответственно, тем меньше теряет свою эффективность пошаговый алгоритм. Однако с увеличением длины непикового интервала на временной оси появляется все больше промежутков, не содержащих (или содержащих значительно меньше событий, чем пиковые интервалы), вследствие чего пошаговый алгоритм совершает <<холостые>> обходы блоков системы. Комбинированный алгоритм же ввиду особенностей часовой структуры имеет возможность пропускать интервалы, не содержащие событий, что сокращает общее число операций. Подбор длины нулевого уровня в соответствии с длиной пикового интервала позволяет за один обход нулевого уровня обработать весь пиковый интервал целиком без необходимости повторных возвратов. Таким образом, временные затраты комбинированного алгоритма в сравнении с пошаговым будут меньше (примерно в 6 раз) при увеличении длины непиковых интервалов.
Событийный алгоритм однако показывает лучшие результаты в связи с тем, что рассмотренная система не нагружена событиями из-за малого количества блоков (1 генератор и 1 процессор).


\textbf{Количество блоков в системе}

Предлагается сравнить временные затраты пошагового, событийного и комбинированного алгоритмов на системе, состоящей из одного генератора и изменяющегося числа процессоров. Продолжительность генерации заявки генерируется согласно равномерному распределению с минимальным и максимальным значением в 1 и 2 тика соответственно. Продолжительность обработки заявки генерируется в соответствии с равномерным распределением с минимальным и максимальным значением в 15 и 16 тиков соответственно. Соответственно, интенсивность генерации заявок превышает интенсивность их обработки. Моделируется работа системы в течение 100000 тиков таймера модельного времени. При этом изменяется количество процессоров в системе для увеличения количества событий в системе. Для комбинированного алгоритма размер нулевого уровня выбран равным 100 тиков, а размер ненулевого уровня выбран равным 10. Шаг таймера модельного времени для пошагового алгоритма составляет 1 тик.

На рисунке \ref{img:graph2} представлен график сравнения временных затрат алгоритмов в зависимости от количества процессоров в системе.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			width=15cm,
			height=10cm,
			grid=major,
			grid style=dashed,
			axis lines=left,
			ylabel={Время работы, мс},
			xlabel={Количество процессоров в системе, шт},
			xmin=0, ymin=0,
			xmax=30, ymax=2500,
			xtick={0,5,...,30},
			legend pos=north west
			]
			\addplot[color=red,mark=*] coordinates {
(0, 206)
(1, 416)
(2, 470)
(3, 508)
(4, 556)
(5, 582)
(6, 618)
(7, 639)
(8, 663)
(9, 700)
(10, 720)
(11, 731)
(12, 746)
(13, 766)
(14, 784)
(15, 804)
(16, 815)
(17, 847)
(18, 886)
(19, 900)
(20, 925)
(21, 958)
(22, 985)
(23, 1017)
(24, 1028)
(25, 1039)
(26, 1049)
(27, 1049)
(28, 1072)
(29, 1088)
(30, 1101)
			};
			\addplot[color=blue,mark=square*] coordinates {
(0, 139)
(1, 380)
(2, 446)
(3, 501)
(4, 535)
(5, 603)
(6, 685)
(7, 719)
(8, 767)
(9, 783)
(10, 800)
(11, 850)
(12, 915)
(13, 992)
(14, 1065)
(15, 1147)
(16, 1193)
(17, 1268)
(18, 1327)
(19, 1404)
(20, 1469)
(21, 1538)
(22, 1614)
(23, 1667)
(24, 1732)
(25, 1835)
(26, 1941)
(27, 1978)
(28, 2009)
(29, 2057)
(30, 2122)
			};
			\addplot[color=green,mark=triangle*] coordinates {
(0, 120)
(1, 359)
(2, 435)
(3, 524)
(4, 594)
(5, 613)
(6, 670)
(7, 749)
(8, 807)
(9, 821)
(10, 878)
(11, 876)
(12, 897)
(13, 920)
(14, 939)
(15, 978)
(16, 984)
(17, 999)
(18, 1023)
(19, 1044)
(20, 1065)
(21, 1085)
(22, 1112)
(23, 1126)
(24, 1155)
(25, 1177)
(26, 1190)
(27, 1216)
(28, 1242)
(29, 1254)
(30, 1281)
			};
			\legend{\text{Комбинированный}, \text{Пошаговый}, \text{Событийный}}
		\end{axis}
	\end{tikzpicture}
	\caption{Время работы алгоритмов в зависимости от количества процессоров в системе}
	\label{img:graph2}
\end{figure}

Проанализируем полученные результаты. При малом (0---3) количестве процессоров в моделируемой системе комбинированный алгоритм уступает пошаговому и событийному по временным затратам. Это связано с тем, что очередь событийного алгоритма при таких данных не заполнена событиями. А с учетом рассматриваемого распределения для генерации заявок (равномерное от 1 до 2 тиков) пошаговый алгоритм практически на каждом тике находит событие и может быть даже эффективнее событийного. Однако с ростом количества процессоров для событийного алгоритма увеличивается количество одновременных событий в очереди и обращений к очереди в целом, а с учетом нелинейной сложности операций вставки в очередь временные затраты событийного алгоритма выше, чем временные затраты комбинированного (на 20\%). Ввиду обхода всего списка блоков системы на каждой итерации временные затраты пошагового алгоритма также становятся выше временных затрат комбинированного алгоритма (в 2--3 раза).

\section{Моделирование МФЦ}

Проведем моделирование МФЦ, рассмотренной в конструкторском разделе. Длина нулевого уровня комбинированного алгоритма подобрана в соответствии с заявленной длиной пикового интервала (10800 тиков). 

На рисунке \ref{img:graph5} представлен результат моделирования МФЦ с разработанным на основе статистических данных распределением поступления клиентов. Диаграмма отражает посещаемость МФЦ в течение недели в конкретные временные интервалы.
\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			ybar,
			width=15cm,
			height=10cm,
			xtick={1,2,3,4,5,6,7},
			xticklabels={пн,вт,ср,чт,пт,сб,вс},
			ylabel={Кол-во посетителей, чел},
			legend style={
				at={(0.5,-0.25)},
				anchor=south,
				legend columns=-1
			}
			]
			\addplot coordinates {
				(1, 47)
				(2, 117)
				(3, 98)
				(4, 35)
				(5, 37)
				(6, 31)
				(7, 23)
			};
			\addplot coordinates {
				(1, 189)
				(2, 548)
				(3, 461)
				(4, 180)
				(5, 163)
				(6, 146)
				(7, 131)
			};
			\addplot coordinates {
				(1, 34)
				(2, 116)
				(3, 85)
				(4, 45)
				(5, 38)
				(6, 38)
				(7, 17)
			};
			\addplot coordinates {
				(1, 25)
				(2, 109)
				(3, 104)
				(4, 46)
				(5, 35)
				(6, 36)
				(7, 22)
			};
			\legend{08.00-11.00, 11.00-14.00, 14.00-17.00, 17.00-20.00}
		\end{axis}
	\end{tikzpicture}
	\caption{Количество посетителей МФЦ в зависимости от дня недели и временного интервала}
	\label{img:graph5}
\end{figure}


Рассмотрим временные затраты алгоритмов в зависимости от числа окон обслуживания в МФЦ. На рисунке \ref{img:graph3} представлено сравнение комбинированного и событийного алгоритма. 
\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			width=15cm,
			height=10cm,
			grid=major,
			grid style=dashed,
			axis lines=left,
			ylabel={Время работы, мс},
			xlabel={Количество окон обслуживания, шт},
			xmin=0, ymin=0,
			xmax=40, ymax=150,
			xtick={0,5,...,40},
			legend pos=north west
			]
			\addplot[color=red,mark=*] coordinates {
				(0, 55)
				(1, 59)
				(2, 63)
				(3, 67)
				(4, 70)
				(5, 73)
				(6, 77)
				(7, 80)
				(8, 83)
				(9, 86)
				(10, 89)
				(11, 92)
				(12, 94)
				(13, 97)
				(14, 98)
				(15, 99)
				(16, 100)
				(17, 102)
				(18, 102)
				(19, 103)
				(20, 104)
				(21, 104)
				(22, 105)
				(23, 107)
				(24, 107)
				(25, 108)
				(26, 109)
				(27, 110)
				(28, 111)
				(29, 111)
				(30, 114)
				(31, 114)
				(32, 114)
				(33, 115)
				(34, 115)
				(35, 116)
				(36, 118)
				(37, 118)
				(38, 119)
				(39, 119)
				(40, 120)
			};
			\addplot[color=green,mark=triangle*] coordinates {
				(0, 34)
				(1, 41)
				(2, 48)
				(3, 55)
				(4, 60)
				(5, 64)
				(6, 70)
				(7, 77)
				(8, 84)
				(9, 88)
				(10, 92)
				(11, 96)
				(12, 100)
				(13, 106)
				(14, 105)
				(15, 106)
				(16, 107)
				(17, 109)
				(18, 113)
				(19, 114)
				(20, 115)
				(21, 116)
				(22, 119)
				(23, 119)
				(24, 118)
				(25, 121)
				(26, 123)
				(27, 122)
				(28, 122)
				(29, 123)
				(30, 123)
				(31, 124)
				(32, 126)
				(33, 126)
				(34, 127)
				(35, 128)
				(36, 129)
				(37, 129)
				(38, 130)
				(39, 131)
				(40, 132)
			};
			\legend{\text{Комбинированный}, \text{Событийный}}
		\end{axis}
	\end{tikzpicture}
	\caption{Время работы комбинированного и событийного алгоритмов в зависимости от количества окон обслуживания}
	\label{img:graph3}
\end{figure}


На рисунке \ref{img:graph4} представлено сравнение комбинированного и пошагового алгоритма.

\begin{figure}[H]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			width=15cm,
			height=10cm,
			grid=major,
			grid style=dashed,
			axis lines=left,
			ylabel={Время работы, мс},
			xlabel={Количество окон обслуживания, шт},
			xmin=0, ymin=0,
			xmax=40, ymax=7000,
			xtick={0,5,...,40},
			legend pos=north west
			]
			\addplot[color=red,mark=*] coordinates {
				(0, 55)
				(1, 59)
				(2, 63)
				(3, 67)
				(4, 70)
				(5, 73)
				(6, 77)
				(7, 80)
				(8, 83)
				(9, 86)
				(10, 89)
				(11, 92)
				(12, 94)
				(13, 97)
				(14, 98)
				(15, 99)
				(16, 100)
				(17, 102)
				(18, 102)
				(19, 103)
				(20, 104)
				(21, 104)
				(22, 105)
				(23, 107)
				(24, 107)
				(25, 108)
				(26, 109)
				(27, 110)
				(28, 111)
				(29, 111)
				(30, 114)
				(31, 114)
				(32, 114)
				(33, 115)
				(34, 115)
				(35, 116)
				(36, 118)
				(37, 118)
				(38, 119)
				(39, 119)
				(40, 120)
			};
			\addplot[color=blue,mark=square*] coordinates {
				(0, 2289)
				(1, 2337)
				(2, 2396)
				(3, 2452)
				(4, 2517)
				(5, 2584)
				(6, 2686)
				(7, 2693)
				(8, 2756)
				(9, 2827)
				(10, 2891)
				(11, 2957)
				(12, 3028)
				(13, 3099)
				(14, 3212)
				(15, 3342)
				(16, 3478)
				(17, 3598)
				(18, 3731)
				(19, 3864)
				(20, 3988)
				(21, 4118)
				(22, 4245)
				(23, 4371)
				(24, 4504)
				(25, 4627)
				(26, 4763)
				(27, 4889)
				(28, 5014)
				(29, 5158)
				(30, 5285)
				(31, 5408)
				(32, 5535)
				(33, 5667)
				(34, 5759)
				(35, 5973)
				(36, 6083)
				(37, 6219)
				(38, 6350)
				(39, 6484)
				(40, 6620)
			};
			\legend{\text{Комбинированный}, \text{Пошаговый}}
		\end{axis}
	\end{tikzpicture}
	\caption{Время работы комбинированного и пошагового алгоритмов в зависимости от количества окон обслуживания}
	\label{img:graph4}
\end{figure}

Временные затраты событийного алгоритма оказались в среднем на 20\% выше временных затрат комбинированного алгоритма при количестве окон > 7.
Временные затраты пошагового алгоритма оказались в среднем в 35 раз выше временных затрат комбинированного алгоритма.


\section{Выводы}
В рамках данного раздела было проведено исследование характеристик разработанного комбинированного алгоритма продвижения модельного времени. 
Было проведено моделирование МФЦ, по итогам которого получено сравнение временной эффективности комбинированного, пошагового и событийного алгориитмов. Временные затраты комбинированного алгоритма оказались на 20\% меньше временных затрат событийного алгоритма при количестве окон обслуживания > 7 штук, а также в 35 раз меньше затрат пошагового при любом количестве окон обслуживания. Также был проведен сравнительный анализ алгоритмов при увеличении длины пикового интервала в распределении поступающих заявок и при увеличении числа процессоров моделируемой системы. По итогам сравнения временные затраты комбинированного алгоритма в первом случае при длине непикового интервала > 250 тиков стремятся к затратам событийного алгоритма и в 6 раз меньше затрат пошагового алгоритма. Во втором случае временные затраты комбинированного алгоритма при количестве процессоров > 5 штук на 20\% меньше временных затрат событийного алгоритма и в 2-3 раза меньше затрат пошагового.